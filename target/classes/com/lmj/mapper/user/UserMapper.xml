<?xml version="1.0" encoding="UTF-8" ?>
        <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lmj.mapper.user.UserMapper">
<!--
 private  String username;//用户名
    private String password;//用户密码
    private String email;//邮箱
    private String relName;//真实姓名
    private String userSign;//个人签名
    private String headPhoto;//用户头像
    private Integer articleNums;//发布文章数量
    private String phoneNum;//电话号码
..................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................

-->
    <!--注册用户-->
    <insert id="registerUser" parameterType="com.lmj.model.User">
        insert into user(username,password,email,relName,userSign,headPhoto,phoneNum)
        values (#{username},#{password},#{email},#{relName},#{userSign},#{headPhoto},#{phoneNum})
    </insert>

    <select id="loginUser" parameterType="java.lang.String" resultType="com.lmj.model.User">
        select * from user where username=#{username} and password=#{password}
    </select>

    <!--根据用户名发现用户-->
    <select id="findUserByUserName" parameterType="java.lang.String" resultType="com.lmj.model.User">
        select u.id,u.username,u.email,u.relName,u.userSign,u.articleNums,u.phoneNum from user as u where username=#{username}
    </select>
    <!--修改密码-->
    <update id="updateUserPassword" parameterType="com.lmj.model.User">
        update user set password=#{password} where id=#{id}
    </update>
    <!--修改邮箱-->
    <update id="updateUserEmail" parameterType="com.lmj.model.User">
        update  user set email=#{email} where id=#{id}
    </update>
    <!--修改电话-->
    <update id="updateUserPhoneNum" parameterType="com.lmj.model.User">
        update user set phoneNum=#{phoneNum} where id=#{id}
    </update>
    <!--修改真实姓名-->
    <update id="updateUserRelName" parameterType="com.lmj.model.User">
        update user set relName=#{relName} where id=#{id}
    </update>
    <!--修改个人签名-->
    <update id="updateUserSign" parameterType="com.lmj.model.User">
        update user set userSign=#{userSign} where id=#{id}
    </update>
    <!--根据id查找用户名-->
    <select id="findUserNameById" parameterType="java.lang.Integer" resultType="java.lang.String">
        select username from user where id=#{id}
    </select>
    <!--//每次登陆用户发表一次文章文章数增加一-->
    <update id="updateArticleNumsbyUserName" parameterType="java.lang.String">
        update user set articleNums = articleNums + 1 where username = #{username}
    </update>
    <!--//每次删除文章用户文章数减一-->
    <update id="delArticleOnlyOne">
        update user set articleNums = articleNums-1 where username=#{username}
    </update>
</mapper>
